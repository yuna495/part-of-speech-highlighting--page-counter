# 日本語 品詞カラー表示＋ページカウンタ

**日本語テキスト向け**の VS Code 拡張です。  

- **品詞カラー表示**：`kuromoji` による形態素解析で、品詞ごとに**文字色**を付けます  
- **ページカウンタ**：原稿用紙風（行×列）で折り返し、**禁則処理**（行頭禁則）に対応  
- **選択文字数**：選択があるときは**選択範囲の文字数**、無いときは**文書全体の文字数**を表示

> 既定では `.txt`（`plaintext`）のみ対象。必要に応じて設定で拡張できます。

---

## 目次

- [デモ](#デモ)
- [機能](#機能)
- [使い方](#使い方)
- [コマンド](#コマンド)
- [設定](#設定)
- [カウント規則](#カウント規則)
- [推奨ワークフロー](#推奨ワークフロー)
- [既知の制約](#既知の制約)
- [トラブルシュート](#トラブルシュート)
- [変更履歴](#変更履歴)
- [ライセンス](#ライセンス)

---

## デモ
>
> （スクリーンショットをここに貼ってください）
>
> - 品詞ごとに文字色が変わる
> - ステータスバー左側に `現在/全体｜行｜字（行×列）`

---

## 機能

- **品詞カラー表示（文字色）**  
  - `名詞/動詞/形容詞/副詞/助詞/助動詞/連体詞/接続詞/感動詞/接頭詞/記号/その他` をキーに色を割当て  
  - 設定値に `inherit` / `default` / `auto` / 空文字（`""`）/ `#46d2e8` を指定すると**エディタ標準色**を使用
- **ページカウンタ（原稿用紙スタイル）**  
  - `rowsPerPage × colsPerRow`（例：40×40）で折り返し  
  - **禁則処理（行頭禁則）**：次文字が禁則文字（`」）』》】。､` など）の場合、前行へぶら下げ
  - **表示**：`現在ページ/総ページ｜最終文字の「最後のページの行番号」｜文字数（行×列）`
- **選択文字数**  
  - 選択があるときはステータスバーの「字」が**選択範囲の文字数**に切り替わる  
  - 改行（LF）は**文字数に含めない**

---

## 使い方

1. 拡張をインストール
2. `.txt` を開く（既定設定では `plaintext` のみ有効）
3. ステータスバー左側に `現在/全体｜行｜字（行×列）` が表示されます  
   - 文字を選択すると「字」は選択文字数になります
4. 品詞カラーや行×列は設定から変更できます

---

## コマンド

- **POS/Page: 品詞ハイライト 有効/無効** — ハイライトの切替
- **POS/Page: 解析を再適用** — 解析のやり直し
- **POS/Page: ページカウンタ 有効/無効** — ステータスバー表示の切替
- **POS/Page: 行×列を設定** — 1ページの行数／1行の文字数を対話的に変更

---

## 設定

> `設定（JSON）` でキーを追加／変更してください。以下は主な項目です。

| キー | 既定値 | 説明 |
|---|---:|---|
| `posPage.applyToTxtOnly` | `true` | `.txt`（`plaintext`）のみ対象 |
| `posPage.debounceMs` | `200` | 入力中の再解析ディレイ（ms） |
| `posPage.enabledPos` | `true` | 品詞カラー表示の有効化 |
| `posPage.colors` | *下記例* | 品詞→文字色のマップ。`inherit` 等で**標準色** |
| `posPage.maxDocLength` | `200000` | 大きすぎる文書の安全弁 |
| `posPage.enabledPage` | `true` | ステータスバー表示の有効化 |
| `posPage.page.rowsPerPage` | `20` | 1ページの行数 |
| `posPage.page.colsPerRow` | `20` | 1行の文字数 |
| `posPage.kinsoku.enabled` | `true` | 行頭禁則を有効にする |
| `posPage.kinsoku.bannedStart` | `["」","）","』","》","】","。","、"]` | 行頭に来ない文字のリスト |

### 品詞カラー例（濃色）

setting.jsonにて指定してください。

```jsonc
"posPage.colors": {
  "名詞": "inherit",
  "動詞": "#11ff84",
  "形容詞": "#fd9bcc",
  "副詞": "#ffd900",
  "助詞": "inherit",
  "助動詞": "inherit",
  "連体詞": "inherit",
  "接続詞": "#ff14e0",
  "感動詞": "inherit",
  "接頭詞": "inherit",
  "記号": "inherit",
  "その他": "inherit"
}
```

## Release Notes

Users appreciate release notes as you update your extension.

### 1.0.0

Initial release of "日本語 品詞カラー表示＋ページカウンタ"

---
